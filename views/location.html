<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.css">
    <link rel="stylesheet" href="/css/site.css">
    <title>Mark's listing site</title>  
    
</head>
<body>
    <hr>
    <nav>
        <a href="/"><b>Home</b></a> | <a href="/about"><b>About</b></a> |
         <a href="/location"><b>Locations</b></a> | <a href="/employer"><b>Employers</b></a> |
         <a href="/job"><b>Job List</b></a> | <a href="/contact"><b>Contact</b></a>
    </nav>
    
    <hr>
    <h1>Job Locations</h1>
    <p>List of possible job locations</p>
    

    <div class="container"></div>
    
    <footer>
        <hr>
        Copyright Â©2020 | Powered by <a href="https://expressjs.com/">Express</a>  
        
    </footer>
    
    <script>
		let div = document.querySelector('div')		
		let btnfrontend = document.querySelector('#btn-front')

		
		function getData() {
			// creates request object
			request = new XMLHttpRequest()

			// configures request object
			request.open("GET", "http://localhost:3000/location/api")
           
			// this function runs when the response from
			// data loads
			function getResponse(){				

                let data = JSON.parse(this.response); // 'this' refers to `request` object
                console.log('location array/object -- ')
                console.log(data)               

                // to set the innerText of div
                let locations = data;               
                let html = '';
                locations.forEach(loc => {
                let htmlSegment = `<div class="user">
                    <hr>                   
                    <p> <ul> ${loc}</ul>                  
                                        
                    `;
                    //--To Do -- get total years using map reduce
                    // let totalyrs = map(user.years)
                    // console.log(totalyrs)

                    html += htmlSegment;
                    });

                    let container = document.querySelector('.container');
                    container.innerHTML = html;

                    
                }
                    

                    request.addEventListener("load", getResponse)

                    // actually sends the request!!
                    request.send();
                    }

                    //btnfrontend.addEventListener("click", getData)
                    getData()
                    </script>
                    </body>

                    </html>
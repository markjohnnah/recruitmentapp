<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.css">
    <link rel="stylesheet" href="/css/site.css">
    <title>Mark's portfolio site</title>

</head>

<body>
    <hr>
    <nav>
        <a href="/"><b>Home</b></a> | <a href="/about"><b>About</b></a> |
         <a href="/location"><b>Locations</b></a> | <a href="/employer"><b>Employers</b></a> |
         <a href="/job"><b>Job List</b></a> | <a href="/contact"><b>Contact</b></a>
    </nav>
    
    <hr>
    <h1>Keep in touch</h1>
    <h3>Contact information</h3>

    
    <div class="container"></div>
<br>
<h3>Send me a message</h3>
<form action="/form-handling" method="post">

    <label for="name">Name:</label>
    <input type="text" id="name" name="user_name" placeholder="name" required>


    <label for="mail">E-mail:</label>
    <input type="email" id="mail" name="user_email" placeholder="email" required>

    <label for="msg">Message:</label>
    <textarea id="msg" name="user_message" placeholder="message"></textarea>

    <div class="preference">
        <label for="cheese">Do you like cheese?</label>
        <input type="checkbox" name="cheese" id="cheese">
    </div>
    <div class="button">
        <button type="submit">Send your message</button>
    </div>
</form>

<footer>
    <hr>
    Copyright Â©2020 | Powered by <a href="https://expressjs.com/">Express</a>  
    
</footer>

    <script>
        let div = document.querySelector('div')
        let btnexperinece = document.querySelector('#btn-experinece')


        function getData() {
            // creates request object
            request = new XMLHttpRequest()

            // configures request object
            request.open("GET", "http://localhost:3000/contactendpoint")

            // this function runs when the response from
            // data loads
            function getResponse() {

                let data = JSON.parse(this.response); // 'this' refers to `request` object
                console.log('contact object -- ')
                console.log(data)

                // to set the innerText of div
                let users = data;
                let html = '';
               
                    let htmlSegment = `<div class="user">
                    <hr>                   
                    <p> Contact name: ${data.name}</p>                                 
                    <p>Lot: ${data.lot}, Section: ${data.section}</p>
                    <p> ${data.surberb}, ${data.town}, PNG</p>
                    <p> Email: ${data.email}
                    <p> Phone: ${data.phone}
                                        
                    `;
                    //--To Do -- get total years using map reduce
                    // let totalyrs = map(user.years)
                    // console.log(totalyrs)

                    html += htmlSegment;
               

                let container = document.querySelector('.container');
                container.innerHTML = html;


            }

            request.addEventListener("load", getResponse)

            // actually sends the request!!
            request.send();
        }

        // btnexperinece.addEventListener("click", getData)
        getData()
    </script>
</body>

</html>